---
title: "Draft Quarto document"
author: "Mikkel Alnor"
date: "`r Sys.Date()`"
format: html
theme: Darkly
---

## Setup chunk

```{r setup}
#| include: false
library(tidyverse)
library(here)
library(snakecase)
library(readr)

```

# Importing DIME data

## Importing CGM data manually

```{r}
cgm_101 <- here("data-raw/dime/cgm/101.csv") |>
  read_csv(show_col_types = FALSE,
           name_repair = to_snake_case,
           n_max = 100)

sleep_101 <- here("data-raw/dime/sleep/101.csv") |>
  read_csv(show_col_types = FALSE,
           name_repair = to_snake_case,
           n_max = 50)



View(sleep_101)

```

## Functions

### Adding function

```{r}
#' Adds two numbers
#'
#' @param num1 is a number
#' @param num2 is a number
#'
#' @returns gives the sum of the two numbers
#' @export
add_numbers <- function(num1, num2) {
  added <- num1 + num2
  return(added)
}

```

### Importing function

```{r}

#' Import function CGM
#'
#' @param file_path File path for cgm data
#'
#' @returns Imported file as data.frame
import_cgm <- function(file_path) {
  cgm <- file_path |>
    read_csv(
      show_col_types = FALSE,
      name_repair = to_snake_case,
      n_max = 100
    )
  return(cgm)
}

#' Import function Sleep
#'
#' @param file_path File path for Sleep data
#'
#' @returns Imported file data.frame
import_sleep <- function(file_path) {
  sleep <- file_path |>
    read_csv(
      show_col_types = FALSE,
      name_repair = to_snake_case,
      n_max = 100
    )
  return(sleep)
}

here("data-raw/dime/cgm/104.csv") |>
  import_cgm()


here("data-raw/dime/sleep/101.csv") |>
  import_sleep()


```

### General import function

```{r}
#' General Import function
#'
#' @param file_path File path to raw data
#' @param n Number of rows to import
#'
#' @returns data.frame of n rows of the raw data
import_data_snake <- function(file_path,n=50) {
  data <- file_path |>
    readr::read_csv(
      show_col_types = FALSE,
      name_repair = snakecase::to_snake_case,
      n_max = n)
  return(data)
}





# test function
import_data_snake <- function(type,patient,n=50) {
  data <- here(paste0("data-raw/dime/",as.character(type),"/",as.character(patient),".csv")) |>
    readr::read_csv(
      show_col_types = FALSE,
      name_repair = snakecase::to_snake_case,
      n_max = as.numeric(n))
  return(data)
}
import_data_snake("cgm","101",50)

```
